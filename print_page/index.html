<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Print Site - CUBRID Vector Database</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/print-site-enum-headings1.css" rel="stylesheet" />
        <link href="../css/print-site-enum-headings2.css" rel="stylesheet" />
        <link href="../css/print-site-enum-headings3.css" rel="stylesheet" />
        <link href="../css/print-site-enum-headings4.css" rel="stylesheet" />
        <link href="../css/print-site-enum-headings5.css" rel="stylesheet" />
        <link href="../css/print-site-enum-headings6.css" rel="stylesheet" />
        <link href="../css/print-site.css" rel="stylesheet" />
        <link href="../css/print-site-readthedocs.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Print Site";
        var mkdocs_page_input_path = "print_page.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bnf.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/sql.min.js"></script>
      <script>hljs.highlightAll();</script> 

        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CUBRID Vector Database
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="//search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vector-ddl/">Vector DDL</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vector-dml/">Vector DML</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vector-index/">Vector Index</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vector-operations/">Vector Operations</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CUBRID Vector Database</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Print Site</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-cubrid-vector">CUBRID Vector</h1>
<p>(DEPRECATED) CUBRID Vector Database Specification
(DEPRECATED) CUBRID Vector Database Specification
(DEPRECATED) CUBRID Vector Database Specification</p>
<p>Migrated to <a href="https://vimkim.github.io/cubrid-vec-manual-sphinx/">Sphinx</a></p>
<!--## Vector-->
<!---->
<!--- [Vector DDL](./vector-ddl.md)-->
<!--- [Vector DML](./vector-dml.md)-->
<!--- [Vector Index](./vector-index.md)--></section><section class="print-page" id="vector-ddl"><h1 id="vector-ddl-vector-ddl">Vector DDL</h1>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#vector-ddl-__codelineno-0-1"></a><span class="n">vector</span><span class="w"> </span><span class="c1">-- Equivalent to vector(2000)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#vector-ddl-__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#vector-ddl-__codelineno-0-3"></a><span class="n">vector</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="c1">-- 512-dimensional vector of float32</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#vector-ddl-__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#vector-ddl-__codelineno-0-5"></a><span class="n">vector</span><span class="p">(</span><span class="n">float64</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="c1">-- 128-dimensional vector of float64</span>
</span></code></pre></div>
<h2 id="vector-ddl-bnf">BNF</h2>
<div class="language-bnf highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#vector-ddl-__codelineno-1-1"></a><span class="p">&lt;</span><span class="nc">declaration</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;vector&quot; [ &quot;(&quot; [ <span class="p">&lt;</span><span class="nc">vector_type</span><span class="p">&gt;</span> &quot;,&quot; ] <span class="p">&lt;</span><span class="nc">dim</span><span class="p">&gt;</span> &quot;)&quot; ]
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#vector-ddl-__codelineno-1-2"></a><span class="p">&lt;</span><span class="nc">vector_type</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;float32&quot; | &quot;binary&quot;
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#vector-ddl-__codelineno-1-3"></a><span class="p">&lt;</span><span class="nc">dim</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">positive_integer</span><span class="p">&gt;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#vector-ddl-__codelineno-1-4"></a><span class="p">&lt;</span><span class="nc">positive_integer</span><span class="p">&gt;</span> <span class="o">::=</span> {digit}+
</span></code></pre></div>
<ul>
<li><code>&lt;dim&gt;</code> is a positive integer value<ul>
<li>between 1 and 2000 inclusive if and only if <code>&lt;vector_type&gt;</code> is float32.</li>
<li>between 1 and 64000 inclusive if and only if <code>&lt;vector_type&gt;</code> is binary.</li>
</ul>
</li>
</ul>
<h2 id="vector-ddl-examples">Examples</h2>
<h3 id="vector-ddl-create-table">Create table</h3>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#vector-ddl-__codelineno-2-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#vector-ddl-__codelineno-2-2"></a><span class="w">  </span><span class="n">host_year</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#vector-ddl-__codelineno-2-3"></a><span class="w">  </span><span class="n">embedding</span><span class="w"> </span><span class="n">vector</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#vector-ddl-__codelineno-2-4"></a><span class="p">);</span>
</span></code></pre></div>
<h3 id="vector-ddl-create-column">Create column</h3>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#vector-ddl-__codelineno-3-1"></a><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#vector-ddl-__codelineno-3-2"></a><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">embedding</span><span class="w"> </span><span class="n">vector</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span></code></pre></div></section><section class="print-page" id="vector-dml"><h1 id="vector-dml-vector-dml">Vector DML</h1>
<p>This page outlines the CRUD operations (Create, Read, Update, Delete) for vectors in a database.</p>
<h2 id="vector-dml-create-and-insert-a-vector-into-a-table">Create and Insert a Vector into a Table</h2>
<p>To insert vectors into a table:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#vector-dml-__codelineno-0-1"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#vector-dml-__codelineno-0-2"></a><span class="w">  </span><span class="n">embedding</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#vector-dml-__codelineno-0-3"></a><span class="p">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#vector-dml-__codelineno-0-4"></a><span class="k">VALUES</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#vector-dml-__codelineno-0-5"></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;[1,2,3]&#39;</span><span class="p">),</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#vector-dml-__codelineno-0-6"></a><span class="w">  </span><span class="p">(</span><span class="s1">&#39;[4,5,6]&#39;</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="vector-dml-read-vectors">Read Vectors</h2>
<p>To retrieve vectors from the table:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#vector-dml-__codelineno-1-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#vector-dml-__codelineno-1-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#vector-dml-__codelineno-1-3"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<h3 id="vector-dml-read-nearest-neighbor-vectors">Read Nearest Neighbor Vectors</h3>
<p>You can retrieve the nearest neighbors
using either vector distance operators or functions.</p>
<p>Using a distance operator:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#vector-dml-__codelineno-2-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#vector-dml-__codelineno-2-2"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">embedding</span><span class="w"> </span><span class="o">&lt;-&gt;</span><span class="w"> </span><span class="s1">&#39;[3,1,2]&#39;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#vector-dml-__codelineno-2-3"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<p>Using a distance function:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#vector-dml-__codelineno-3-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#vector-dml-__codelineno-3-2"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">l2_distance</span><span class="p">(</span><span class="n">embedding</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[3, 1, 2]&#39;</span><span class="p">)</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#vector-dml-__codelineno-3-3"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<p>Both of the above queries are equivalent.</p>
<ul>
<li>If no vector index is present, the "exact nearest neighbor" algorithm is applied.</li>
<li>If a vector index exists, it will be used automatically.</li>
</ul>
<h4 id="vector-dml-note-on-multiple-vector-indices">Note on Multiple Vector Indices</h4>
<p>You can create multiple indices for a single vector column,
but each index must correspond to a different type of distance operator.
A single vector column can only have one index for each distance type.</p>
<h2 id="vector-dml-control-vector-index-usage">Control Vector Index Usage</h2>
<ul>
<li><code>/*+ VECTOR_INDEX_SCAN (my_col_name) */</code>: force vector index</li>
<li><code>/*+ NO_VECTOR_INDEX_SCAN */</code>: force prevent vector index</li>
</ul>
<h3 id="vector-dml-force-the-usage-of-vector-index-if-present">Force the usage of vector index, if present</h3>
<p>First, you need to create an ANN vector index on 'embedding' column of table 'items'.</p>
<p>Refer to <a href="#vector-index">Vector Index</a> page.</p>
<p>You can place a hint to force the optimizer to use the vector index if present.
If no index is found, the optimizer silently ignores the hint.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#vector-dml-__codelineno-4-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="cm">/*+ VECTOR_INDEX_SCAN (my_col_name) */</span><span class="w"> </span><span class="n">name</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#vector-dml-__codelineno-4-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#vector-dml-__codelineno-4-3"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">l2_distance</span><span class="p">(</span><span class="n">embedding</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[3, 1, 2]&#39;</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#vector-dml-__codelineno-4-4"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<h3 id="vector-dml-abort-the-usage-of-vector-index">Abort the usage of vector index</h3>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#vector-dml-__codelineno-5-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="cm">/*+ NO_VECTOR_INDEX_SCAN */</span><span class="w"> </span><span class="n">name</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#vector-dml-__codelineno-5-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#vector-dml-__codelineno-5-3"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">l2_distance</span><span class="p">(</span><span class="n">embedding</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[3, 1, 2]&#39;</span><span class="p">)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#vector-dml-__codelineno-5-4"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span></code></pre></div>
<h2 id="vector-dml-update-vector">Update vector</h2>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#vector-dml-__codelineno-6-1"></a><span class="k">UPDATE</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#vector-dml-__codelineno-6-2"></a><span class="k">SET</span><span class="w"> </span><span class="n">embedding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;[1, 2, 3]&#39;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#vector-dml-__codelineno-6-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span></code></pre></div>
<h2 id="vector-dml-delete-vector">Delete vector</h2>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#vector-dml-__codelineno-7-1"></a><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#vector-dml-__codelineno-7-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span></code></pre></div></section><section class="print-page" id="vector-index"><h1 id="vector-index-vector-index">Vector Index</h1>
<p>This page outlines the CRUD operations for vector indices in CUBRID database.</p>
<p>CUBRID only supports HNSW index at the moment.</p>
<h2 id="vector-index-create-a-vector-index">Create a Vector Index</h2>
<p>In order to create a vector index, one must specify:</p>
<ol>
<li>the table and the column name where the index will be created onto,</li>
<li>the metric function used for distance calculation,</li>
<li>the index construction parameters
   (for HNSW, this will be <code>ef_construction</code> and <code>M</code>).</li>
</ol>
<p>In order to effectively use the HNSW index, one must specify:</p>
<ul>
<li>the search parameter (for HNSW, this will be <code>ef_search</code>).</li>
</ul>
<h3 id="vector-index-bnf">BNF</h3>
<div class="language-bnf highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#vector-index-__codelineno-0-1"></a><span class="p">&lt;</span><span class="nc">create_vector_index</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;CREATE VECTOR INDEX&quot; <span class="p">&lt;</span><span class="nc">index_name</span><span class="p">&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#vector-index-__codelineno-0-2"></a>&quot;ON&quot; <span class="p">&lt;</span><span class="nc">table_name</span><span class="p">&gt;</span> &quot;(&quot; <span class="p">&lt;</span><span class="nc">column_name</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nc">metric_function</span><span class="p">&gt;</span> &quot;)&quot; <span class="p">&lt;</span><span class="nc">with_options</span><span class="p">&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#vector-index-__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#vector-index-__codelineno-0-4"></a><span class="p">&lt;</span><span class="nc">index_name</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#vector-index-__codelineno-0-5"></a><span class="p">&lt;</span><span class="nc">table_name</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#vector-index-__codelineno-0-6"></a><span class="p">&lt;</span><span class="nc">column_name</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#vector-index-__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#vector-index-__codelineno-0-8"></a><span class="p">&lt;</span><span class="nc">metric_function</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">cosine</span><span class="p">&gt;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#vector-index-__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#vector-index-__codelineno-0-10"></a><span class="p">&lt;</span><span class="nc">cosine</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;cosine&quot;
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#vector-index-__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#vector-index-__codelineno-0-12"></a><span class="p">&lt;</span><span class="nc">with_options</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;WITH&quot; &quot;(&quot; <span class="p">&lt;</span><span class="nc">option_list</span><span class="p">&gt;</span> &quot;)&quot;
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#vector-index-__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#vector-index-__codelineno-0-14"></a><span class="p">&lt;</span><span class="nc">option_list</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">option</span><span class="p">&gt;</span> | <span class="p">&lt;</span><span class="nc">option</span><span class="p">&gt;</span> &quot;,&quot; <span class="p">&lt;</span><span class="nc">option_list</span><span class="p">&gt;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#vector-index-__codelineno-0-15"></a><span class="p">&lt;</span><span class="nc">option</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">parameter</span><span class="p">&gt;</span> &quot;=&quot; <span class="p">&lt;</span><span class="nc">value</span><span class="p">&gt;</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#vector-index-__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#vector-index-__codelineno-0-17"></a><span class="p">&lt;</span><span class="nc">parameter</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;m&quot; | &quot;ef_construction&quot;
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#vector-index-__codelineno-0-18"></a><span class="p">&lt;</span><span class="nc">value</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">integer</span><span class="p">&gt;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#vector-index-__codelineno-0-19"></a>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#vector-index-__codelineno-0-20"></a><span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span> <span class="o">::=</span> [A-Za-z_][A-Za-z_0-9]*
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#vector-index-__codelineno-0-21"></a><span class="p">&lt;</span><span class="nc">integer</span><span class="p">&gt;</span> <span class="o">::=</span> [0-9]+
</span></code></pre></div>
<ul>
<li><code>m</code> is the maximum number of connections (edges) each node (vector)
  can have in the graph at each layer of the HNSW structure.
  It is also known as the degree of each node in the graph.</li>
<li><code>ef_construction</code> controls the size of the dynamic candidate list
  when inserting elements during the index construction phase.
  It defines how many neighbors are checked
  during the construction of the graph when new vectors are added.</li>
</ul>
<h3 id="vector-index-examples">Examples</h3>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#vector-index-__codelineno-1-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="n">VECTOR</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">embedding_hnsw_idx</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#vector-index-__codelineno-1-2"></a><span class="k">ON</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="p">(</span><span class="n">embedding</span><span class="w"> </span><span class="n">cosine</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#vector-index-__codelineno-1-3"></a><span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="n">ef_construction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="vector-index-inspect-vector-index-options">Inspect Vector Index Options</h2>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#vector-index-__codelineno-2-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">embedding_hnsw_idx</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#vector-index-__codelineno-2-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">items</span><span class="p">;</span>
</span></code></pre></div>
<h2 id="vector-index-configure-search-parameter">Configure Search parameter</h2>
<ul>
<li><code>ef_search</code> is the exploration factor during search.
  It is a parameter in the HNSW algorithm that controls
  the number of nearest neighbor candidates to explore during a search query.
  If ef_search is not specified,
  it is set to the same value as the <code>ef_construction</code> of the index by default.</li>
</ul>
<ul>
<li>[ ] TODO: Discuss the default value of ef_search if not specified.</li>
</ul>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#vector-index-__codelineno-3-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="cm">/*+ VECTOR_INDEX_SCAN (embedding) */</span><span class="w"> </span><span class="n">name</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#vector-index-__codelineno-3-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#vector-index-__codelineno-3-3"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">l2_distance</span><span class="p">(</span><span class="n">embedding</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[3, 1, 2]&#39;</span><span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#vector-index-__codelineno-3-4"></a><span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#vector-index-__codelineno-3-5"></a><span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="n">ef_search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="vector-index-update-vector-index">Update Vector Index</h2>
<p>Not implemented yet.</p>
<h2 id="vector-index-delete-vector-index">Delete Vector Index</h2>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#vector-index-__codelineno-4-1"></a><span class="k">DROP</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">embedding_hnsw_idx</span><span class="p">;</span>
</span></code></pre></div>
<h2 id="vector-index-vector-index-configuration">Vector Index Configuration</h2>
<h3 id="vector-index-memory-usage">Memory Usage</h3>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#vector-index-__codelineno-5-1"></a><span class="c1"># filename: cubrid.conf</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#vector-index-__codelineno-5-2"></a><span class="n">vector_memory_size</span><span class="o">=</span><span class="mi">8</span><span class="n">G</span>
</span></code></pre></div></section><section class="print-page" id="vector-operations"><h1 id="vector-operations-vector-operations">Vector Operations</h1>
<p>This page describes the supported vector operations.</p>
<h2 id="vector-operations-overview">Overview</h2>
<h3 id="vector-operations-basic-vector-functions">Basic Vector Functions</h3>
<ul>
<li>vector_dims(vector) -&gt; integer</li>
<li>vector_dimension_count(vector) -&gt; integer</li>
<li>vector_norm(vector) -&gt; double</li>
<li>vector_dimension_format(vector) -&gt; INT8 | FLOAT32 | FLOAT64</li>
</ul>
<ul>
<li>[ ] TODO: Discuss vector_dimension_format output</li>
</ul>
<h3 id="vector-operations-vector-distance-functions">Vector Distance Functions</h3>
<ul>
<li>l2_distance()</li>
<li>l2_normalize()</li>
<li>l1_distance()</li>
<li>cosine_distance()</li>
<li>inner_product()</li>
</ul>
<h2 id="vector-operations-vector-operators">Vector Operators</h2>
<h3 id="vector-operations-basic-vector-operators">Basic Vector Operators</h3>
<ul>
<li><code>+</code>: element-wise addition</li>
<li><code>-</code>: element-wise subtraction</li>
<li><code>*</code>: element-wise multiplication</li>
<li><code>||</code>: concatenation</li>
</ul>
<h3 id="vector-operations-distance-operators">Distance Operators</h3>
<ul>
<li><code>&lt;-&gt;</code>: L2 distance</li>
<li><code>&lt;#&gt;</code>: negative inner product</li>
<li><code>&lt;=&gt;</code>: cosine distance</li>
<li><code>&lt;+&gt;</code>: L1 distance</li>
</ul>
<h2 id="vector-operations-specifications">Specifications</h2>
<h3 id="vector-operations-vector_dimsvector-integer">vector_dims(vector) -&gt; integer</h3>
<div class="language-bnf highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#vector-operations-__codelineno-0-1"></a>VECTOR_DIMS ( EXPR )
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#vector-operations-__codelineno-0-2"></a>VECTOR_DIMENSION_COUNT ( EXPR )
</span></code></pre></div>
<ul>
<li>It returns the number of dimensions of a vector as a NUMBER.</li>
<li>EXPR must evaluate to a vector.</li>
<li>If EXPR is NULL, NULL is returned.</li>
</ul>
<ul>
<li>[ ] TODO: should it return a NUMBER?</li>
</ul>
<h3 id="vector-operations-vector_dimsvector-integer_1">vector_dims(vector) -&gt; integer</h3>
<h3 id="vector-operations-vector_dimension_countvector-integer">vector_dimension_count(vector) -&gt; integer</h3>
<h3 id="vector-operations-vector_normvector-double">vector_norm(vector) -&gt; double</h3>
<h3 id="vector-operations-vector_dimension_formatvector-int8-float32-float64">vector_dimension_format(vector) -&gt; INT8 | FLOAT32 | FLOAT64</h3></section></div>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "/";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../js/print-site.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
